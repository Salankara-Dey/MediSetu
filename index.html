<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medicine Redistribution Portal</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />

  <link rel="stylesheet" href="style.css" />
</head>

<body>

<div id="dashboardUI" style="display:none;">

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="brand">
      <img src="logo.jpeg" class="logo-img" />
      <div>
        <h1>MediSetu</h1>
        <span>Cold-Chain Medicine Redistribution Portal</span>
      </div>
    </div>

    <div class="nav-right">
      <div class="icon-wrapper">
        <i class="fa-regular fa-bell" onclick="openNotifications()"></i>
        <span id="alertCount" class="badge">0</span>
      </div>
      <i class="fa-solid fa-gear" onclick="openSettings()"></i>
      <button
        onclick="sendTestEmail()"
        class="nav-btn"
        title="Send Test Email"
      >
        üìß Test Email
      </button>

      <div class="avatar" onclick="openProfile()">A</div>
    </div>
  </nav>

  <!-- ALERT -->
  <div class="alert slim-alert">
    <i class="fa-solid fa-triangle-exclamation mr-3 text-lg"></i>
    <div>
      <strong>High Wastage Risk</strong> ‚Äì Immediate redistribution recommended for critical batches.
    </div>
  </div>

</div>

<!-- üîî NOTIFICATION DROPDOWN -->
<div id="notificationBox" class="dropdown-box" style="display:none;"></div>

<!-- ‚öôÔ∏è SETTINGS -->
<div id="settingsBox" class="dropdown-box" style="display:none;">
  <strong>Settings</strong>
  <p>Theme</p>
  <p>Notifications</p>
  <p>Logout</p>
</div>

<!-- üë§ PROFILE -->
<div id="profileBox" class="dropdown-box" style="display:none;">
  <strong>User Profile</strong>
  <p>Admin</p>
  <p>Distributor</p>
</div>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-body">
  <div class="login-card">
    <div class="login-header">
      <h2>Welcome to MediSetu</h2>
      <p class="subtitle">Enter your details to continue</p>
    </div>

    <div class="login-form">
      <input type="text" id="name" placeholder="Your Name" />
      <input type="text" id="location" placeholder="Location" />

      <select id="role" onchange="handleRoleChange()">
        <option value="">Select Role</option>
        <option value="admin">Admin</option>
        <option value="user">User / Buyer</option>
        <option value="store">Medical Store</option>
      </select>

      <!-- User-only field -->
      <div id="medicineField" style="display:none;">
        <input type="text" id="medicine" placeholder="Required Medicine" />
      </div>

      <button onclick="login()">Continue</button>
    </div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" style="display:none;">
  <div class="dashboard">
    <div class="header">
      <h1>üè• Medicine Redistribution Portal</h1>
      <p class="subtitle">Real-time Cold-Chain Monitoring & Smart Redistribution</p>
    </div>

    <!-- METRICS / KPI CARDS -->
    <div class="analytics">
      <div class="card kpi-card">
        <div class="flex items-center justify-between mb-2">
          <span class="label">Current Temperature</span>
          <i class="fa-solid fa-thermometer-half text-teal-500 text-xl"></i>
        </div>
        <h2 id="liveTemp" class="text-4xl font-bold">-- ¬∞C</h2>
        <span id="tempTrend" class="text-sm mt-1 trend-negative" style="display:none;">
          -0.3% from last hour
        </span>
      </div>

      <div class="card kpi-card">
        <div class="flex items-center justify-between mb-2">
          <span class="label">Cold Chain Status</span>
          <i class="fa-solid fa-shield-check text-green-500 text-xl"></i>
        </div>
        <h2 id="tempStatus" class="text-3xl font-bold">--</h2>
        <span id="statusTrend" class="text-sm mt-1 text-green-600" style="display:none;">
          Active
        </span>
      </div>

      <div class="card kpi-card">
        <div class="flex items-center justify-between mb-2">
          <span class="label">Medicines At Risk</span>
          <i class="fa-solid fa-triangle-exclamation text-red-500 text-xl"></i>
        </div>
        <h2 id="riskCount" class="text-4xl font-bold text-red-600">0</h2>
        <span class="text-sm mt-1 text-gray-600">High risk detected</span>
      </div>

      <div class="card kpi-card">
        <div class="flex items-center justify-between mb-2">
          <span class="label">Redistributed Today</span>
          <i class="fa-solid fa-box text-teal-500 text-xl"></i>
        </div>
        <h2 id="redistCount" class="text-4xl font-bold">0</h2>
        <span class="text-sm mt-1 text-green-600">+15% vs last week</span>
      </div>
    </div>

    <!-- LIVE TEMPERATURE GAUGE CARD -->
    <div class="card mb-6">
      <h3 class="text-lg font-semibold mb-4 flex items-center">
        Live Temperature Monitoring
        <i class="fa-solid fa-thermometer-half text-teal-500 ml-2"></i>
      </h3>
      <div class="text-5xl font-bold text-teal-600 mb-3" id="liveTempBig">-- ¬∞C</div>
      <div class="w-full bg-gray-200 rounded-full h-4 mb-2 overflow-hidden">
        <div id="tempProgress" class="bg-teal-500 h-4 rounded-full transition-all duration-500" style="width: 50%;"></div>
      </div>
      <p class="text-sm text-gray-600">Safe storage range: 2¬∞C ‚Äì 8¬∞C</p>
    </div>

    <!-- REDISTRIBUTION WORKFLOW STEPPER -->
    <div class="card mb-8">
      <h3 class="text-lg font-semibold mb-6">Redistribution Workflow</h3>
      <div class="flex justify-between items-center max-w-3xl mx-auto">
        <div class="text-center">
          <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
          </div>
          <p class="text-sm font-medium">Alert Detected</p>
        </div>
        <div class="flex-1 h-1 bg-gray-300 mx-4"></div>
        <div class="text-center">
          <div class="w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fa-solid fa-paper-plane text-teal-600"></i>
          </div>
          <p class="text-sm font-medium">Request Sent</p>
        </div>
        <div class="flex-1 h-1 bg-gray-300 mx-4"></div>
        <div class="text-center">
          <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fa-solid fa-check text-gray-500"></i>
          </div>
          <p class="text-sm font-medium">Redistributed</p>
        </div>
      </div>
    </div>

    <!-- SEARCH -->
    <input
      type="text"
      id="searchInput"
      placeholder="Search medicine or pharmacy..."
      onkeyup="searchMedicines()"
    />

    <!-- TABLE -->
    <div class="table-container">
      <table id="medicineTable">
        <tr>
          <th>Medicine</th>
          <th>Expiry</th>
          <th>Temp Status</th>
          <th>Risk Score</th>
          <th>Status</th>
          <th>Action</th>
          <th>AI Recommendation</th>
        </tr>
      </table>
    </div>

  </div>
</div>

<!-- SCRIPT FILES -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script src="script.js"></script>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-content">
    <div class="footer-left">
      <strong>MediSetu</strong>
      <p>Cold-Chain Medicine Redistribution Portal</p>
    </div>

    <div class="footer-center">
      <p>Ensuring safe, efficient, and intelligent redistribution of life-saving medicines.</p>
    </div>

    <div class="footer-right">
      <p>¬© 2026 MediSetu</p>
      <p>Built for Smart Healthcare Systems</p>
    </div>
  </div>
</footer>

</body>
</html>
